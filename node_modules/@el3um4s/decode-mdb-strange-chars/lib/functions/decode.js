"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.decodeVBSBuffer = exports.decodeString = void 0;
const dictionaryAccessToUTF8_1 = require("./dictionaryAccessToUTF8");
const charFromBuffer = (b) => {
    const str = JSON.parse(JSON.stringify(b[0]));
    const result = str.data.map((x) => x.toString(16).padStart(2, "0")).join(" ");
    return result;
};
const replaceChars = (text) => {
    let textReplaced = ` ${text} `;
    dictionaryAccessToUTF8_1.dictionaryAccessToUTF8.forEach((c) => {
        textReplaced = textReplaced.replaceAll(` ${c.win} `, ` ${c.utf.replaceAll(" ", "")} `);
    });
    return textReplaced;
};
const decodeString = (text) => {
    const textReplaced = replaceChars(text);
    const result = Buffer.from(textReplaced.replaceAll(" ", ""), "hex");
    return result.toString("utf8");
};
exports.decodeString = decodeString;
const decodeVBSBuffer = (buffer) => {
    const str = charFromBuffer(buffer);
    const result = (0, exports.decodeString)(str);
    return result;
};
exports.decodeVBSBuffer = decodeVBSBuffer;
